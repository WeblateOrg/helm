# Default values for weblate.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

## @section Global Settings
##

## @param image.repository Weblate image
## @param image.tag Weblate image tag
## @param image.pullPolicy Container image pull policy
## @param image.pullSecrets Container image pull secrets
##
image:
  repository: weblate/weblate
  tag: 4.14.2-1
  pullPolicy: IfNotPresent
  pullSecrets: []

## @param nameOverride
##
nameOverride: ''
## @param fullnameOverride
##
fullnameOverride: ''

## @param labels Common labels
labels: {}

## @param serviceAccount.enabled Enable creating a service account
## @param serviceAccount.name Service account name (if not set, it is generated using the fullname template)
##
serviceAccount:
  # Specifies whether a service account should be created
  enabled: true
  # The name of the service account to use. If not set and create is true, a name is generated using the fullname template
  name:

## @section Weblate
##

weblate:
  ## @param weblate.siteTitle Weblate site title
  ##
  siteTitle: Weblate
  ## @param weblate.siteDomain Weblate site domain
  ##
  siteDomain: chart-example.local

  ## @param weblate.replicaCount Deployment replica count
  ##
  replicaCount: 1

  ## @param weblate.updateStrategy Deployment update strategy
  ##
  updateStrategy: Recreate

  ## @param weblate.defaultUser.username Default admin username (ignored if weblate.defaultUser.existingSecret is set)
  ## @param weblate.defaultUser.password Default admin password (ignored if weblate.defaultUser.existingSecret is set, leave empty to generate a random password)
  ## @param weblate.defaultUser.existingSecret [object] Existing secret containing default admin credentials
  ## @param weblate.defaultUser.existingSecret.name [nullable] Name of existing secret containing default admin password
  ## @param weblate.defaultUser.existingSecret.keyUsername [nullable] Key of existing secret containing default admin username
  ## @param weblate.defaultUser.existingSecret.keyPassword [nullable] Key of existing secret containing default admin password
  ## @param weblate.defaultUser.existingSecret.keyEmail [nullable] Key of existing secret containing default admin email
  ## @param weblate.defaultUser.email Default admin email
  ##
  defaultUser:
    username: admin
    password: '' # leave empty to generate a random password
    email: ''
    existingSecret: {}
    #  name: ''
    #  keyUsername: ''
    #  keyPassword: ''
    #  keyEmail: ''

  ## @param weblate.email.host SMTP server host
  ## @param weblate.email.port SMTP server port
  ## @param weblate.email.tls SMTP enable TLS (do not turn on when weblate.email.ssl is on)
  ## @param weblate.email.ssl SMTP enable SSL (do not turn on when weblate.email.tls is on)
  ## @param weblate.email.auth.user SMTP username
  ## @param weblate.email.auth.password SMTP password
  ## @param weblate.email.serverEmail Sender email for outgoing error emails
  ## @param weblate.email.defaultFromEmail Sender email for outgoing emails
  ##
  email:
    host: ''
    port: 587

    # enabling TLS and SSL at the same time is not allowed
    tls: true
    ssl: false

    # email authentication
    auth:
      user: ''
      password: ''

    serverEmail: ''
    defaultFromEmail: ''

  ## @param weblate.allowedHosts Hosts that are allowed to connect
  ##
  allowedHosts: '*'

  ## @param weblate.debug enable debugging
  ##
  debug: '0'

  ## @param weblate.nodeSelector Node Selector
  ##
  nodeSelector: {}

  ## @param weblate.tolerations Tolerations
  ##
  tolerations: []

  ## @param weblate.affinity Affinity
  ##
  affinity: {}

  ## @param weblate.resources [object] Container resource settings
  ## @param weblate.resources.requests.memory [nullable] Container resource requests
  ## @param weblate.resources.requests.memory [nullable] Container resource requests
  ## @param weblate.resources.limits.cpu [nullable] Container resource limits
  ## @param weblate.resources.limits.memory [nullable] Container resource limits
  ##
  resources: {}
    # We usually recommend not to specify default resources and to leave this as a conscious
    # choice for the user. This also increases chances charts run on environments with little
    # resources, such as Minikube. If you do want to specify resources, uncomment the following
    # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  ## @param weblate.caCertSecretName Secret containing a custom CA cert bundle to be mounted. See https://docs.weblate.org/en/latest/admin/install.html?highlight=certificates#using-custom-certificate-authority
  ##
  caCertSecretName: ''
  ## @param weblate.caCertSubPath Name of the CA cert bundle in the secret, e.g. ca-certificates.crt or ca-bundle.crt
  ##
  caCertSubPath: ''

  ## @param weblate.extraConfig Additional (environment) configs. Values will be evaluated as templates. See https://docs.weblate.org/en/latest/admin/install/docker.html#docker-environment
  ##
  extraConfig: {}

  ## @param weblate.extraConfigSecrets An array of secret names, in the same namespace, that will be used to set additional environment variables
  extraConfigSecrets: []

  ## @deprecated @param weblate.extraSecretConfig Same as `extraConfig`, but created as secrets. Values will be evaluated as Helm templates (deprecated as it can be done with extraConfigSecrets)
  ##
  extraSecretConfig: {}

  ## @deprecated @param weblate.externalSecretName An external secret, in the same namespace, that will be use to set additional (environment) configs. (deprecated as it can be done with extraConfigSecrets)
  ##
  externalSecretName: ''


  ## @param weblate.configOverride Config override. See https://docs.weblate.org/en/latest/admin/install/docker.html#custom-configuration-files
  ##
  configOverride: ''

  ## @param weblate.podSecurityContext.enabled Enable Pod Security Context
  ## @param weblate.podSecurityContext.fsGroup Set the Pod Security Context fsGroup
  ##
  podSecurityContext:
    enabled: true
    fsGroup: 1000

  ## @param weblate.containerSecurityContext.enabled Whether to enable the Container Security Context
  ## @param weblate.containerSecurityContext.capabilities [object] Container Security Context capabilities
  ## @param weblate.containerSecurityContext.readOnlyRootFilesystem [nullable] Container Security Context enable read only filesystem
  ## @param weblate.containerSecurityContext.runAsRoot [nullable] Container Security Context allow running as root
  ## @param weblate.containerSecurityContext.runAsUser [nullable] Container Security Context set run as user
  ##
  containerSecurityContext:
    enabled: false
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    # runAsNonRoot: true
    # runAsUser: 1000

  ## @param weblate.externalPostgres [object] External Postgres settings
  ## @param weblate.externalPostgres.host [nullable] External Postgres host (only applied if postgresql.enabled is false)
  ## @param weblate.externalPostgres.port [nullable] External Postgres port (only applied if postgresql.enabled is false)
  ## @param weblate.externalPostgres.username [nullable] External Postgres username (only applied if postgresql.enabled is false)
  ## @param weblate.externalPostgres.password [nullable] External Postgres password (only applied if postgresql.enabled is false)
  ## @param weblate.externalPostgres.database [nullable] External Postgres database (only applied if postgresql.enabled is false)
  ##
  externalPostgres: {}
  #  host: ''
  #  port: 5432
  #  username: postgres
  #  password: ''
  #  database: postgres

  ## @param weblate.externalRedis [object] External Redis settings(only applied if redis.enabled is false)
  ## @param weblate.externalRedis.host [nullable] External Redis host
  ## @param weblate.externalRedis.port [nullable] External Redis port
  ## @param weblate.externalRedis.tls [nullable] External Redis require TLS
  ## @param weblate.externalRedis.database [nullable] External Redis database
  ## @param weblate.externalRedis.password [nullable] External Redis password
  ##
  externalRedis: {}
  #  host: ''
  #  port: 6379
  #  tls: true
  #  database: '1'
  #  password: ''

## @section Networking
##

## @param service.type Service type
## @param service.port Service port
## @param service.annotations [object] Service annotations
##
service:
  type: ClusterIP
  port: 80
  # Service annotations, use key:value pairs
  annotations:

## @param ingress.enabled Enable creating an Ingress
## @param ingress.ingressClassName Set ingress class name
## @param ingress.annotations [object] Ingress annotations
## @param ingress.hosts [array] Ingress hosts
## @param ingress.tls [array] Ingress TLS settings
##
ingress:
  enabled: false
  ingressClassName: ''
  # Ingres annotations
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  # Host names
  hosts:
  - host: chart-example.local
    paths:
    - path: /
      pathType: Prefix

  # TLS configuration
  tls: []
    #  - secretName: chart-example-tls
    #    hosts:
    #      - chart-example.local

## @section Persistence
##

## @param persistence.enabled Enable persistent storage
## @param persistence.existingClaim Use an existing volume claim
## @param persistence.storageClass [nullable] Storage class to use for persistency
## @param persistence.accessMode Volume Claim access mode
## @param persistence.size Volume Claim size
## @param persistence.filestore_dir Mounting path
##
persistence:
  enabled: true

  # persistence.existingClaim -- Use an existing volume claim
  existingClaim: ''

  # storageClass: "-"

  accessMode: ReadWriteOnce
  size: 10Gi

  filestore_dir: /app/data

## @section Dependencies

## @param postgresql [object] bitnami/postgresql chart values (only deployed when postgresql.enabled is true)
##
postgresql:
  # disable this to configure an existing postgres server using the weblate.externalPostgres.* values
  enabled: true
  auth:
    database: weblate

## @param redis [object] bitnami/redis chart values (only deployed when redis.enabled is true)
##
redis:
  # disable this to configure an existing redis server using the weblate.externalRedis.* values
  enabled: true
  architecture: standalone
  auth:
    enabled: true
  db: 1
